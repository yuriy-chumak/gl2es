#!/usr/bin/env ol

(import (file json))

(define PREFIX "gles_")

(print "#pragma once

/* This file is autogenerated! Do not edit. */

#include <GLES2/gl2.h>

")

(define json (read-json stdin))
(ff-for-each (lambda (name arguments)
      (define return (ref arguments 1))
      (define args (cdr (vector->list arguments)))

      ;; external function
      (for-each display (list return " " "(* " PREFIX name ")"))
      (display "(")
      (unless (null? args)
         (let loop ((args args))
            (display (car args))
            (unless (null? (cdr args))
               (display ", ")
               (loop (cdr args)))))
      (print ");"))
   json)
